<!DOCTYPE html>
<!-- 
Goal Map - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ü–µ–ª–µ–π
–ê–≤—Ç–æ—Ä: Graviy (ggraviy)
GitHub: https://github.com/ggraviy/goal-map
-->
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Goal Map | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ü–µ–ª–µ–π</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDeZVgbPm_1jmXN4xdU94Sr_9xA--WPt18",
            authDomain: "goalmap-dc6e1.firebaseapp.com",
            projectId: "goalmap-dc6e1",
            storageBucket: "goalmap-dc6e1.appspot.com",
            messagingSenderId: "597545355070",
            appId: "1:597545355070:web:d88fc5bcef7a8533110e6f"
        };
    </script>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">üó∫Ô∏è</div>
                <div>
                    <h1 class="logo-title">Goal Map</h1>
                    <p class="logo-subtitle">–ü–ª–∞–Ω–∏—Ä—É–π. –î–æ—Å—Ç–∏–≥–∞–π. –î–µ–ª–∏—Å—å.</p>
                </div>
            </div>
            
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                    <svg class="theme-icon" width="24" height="24" viewBox="0 0 24 24">
                        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/>
                    </svg>
                </button>
                <button class="btn primary-btn" id="newGoalBtn">
                    <span class="btn-icon">+</span>
                    –ù–æ–≤–∞—è —Ü–µ–ª—å
                </button>
            </div>
            
            <div class="user-section" id="userSection">
                <div class="user-avatar">
                    <span id="userInitial">?</span>
                </div>
                <span class="user-name" id="userName"></span>
                <button class="btn ghost-btn" id="logoutBtn">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </header>

    <div class="app-container">
        <main class="workspace">
            <div class="workspace-tabs">
                <button class="workspace-tab active" data-view="cards">–í—Å–µ —Ü–µ–ª–∏</button>
                <button class="workspace-tab" data-view="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            </div>

            <div class="view-container">
                <div class="view-content active" id="cardsView">
                    <div class="cards-header">
                        <h2 class="cards-title">–ú–æ–∏ —Ü–µ–ª–∏</h2>
                        <div class="cards-controls">
                            <div class="cards-stats">
                                <span id="totalGoalsCount">0</span> —Ü–µ–ª–µ–π, 
                                <span id="completedGoalsCount">0</span> –∑–∞–≤–µ—Ä—à–µ–Ω–æ
                            </div>
                            <select id="goalSort" class="goal-sort">
                                <option value="newest">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                                <option value="oldest">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
                                <option value="progress">–ü–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É (‚Üë)</option>
                                <option value="progress_desc">–ü–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É (‚Üì)</option>
                                <option value="pinned">–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Å–Ω–∞—á–∞–ª–∞</option>
                                <option value="title">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
                                <option value="title_desc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="cards-grid" id="cardsGrid">
                        <div class="empty-cards">
                            <div class="empty-icon">üéØ</div>
                            <h3 class="empty-title">–¶–µ–ª–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                            <p class="empty-text">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Ü–µ–ª—å</p>
                        </div>
                    </div>
                </div>

                <div class="view-content" id="detailView">
                    <div class="detail-header">
                        <button class="btn back-btn" id="backToCards">
                            ‚Üê –ù–∞–∑–∞–¥ –∫ —Ü–µ–ª—è–º
                        </button>
                        <div class="goal-header-content">
                            <h2 class="current-goal-title" id="currentGoalTitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å</h2>
                            <p class="goal-description" id="goalDescription"></p>
                        </div>
                        <div class="goal-actions">
                            <button class="btn secondary-btn" id="editGoalBtn" style="display: none;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button class="btn secondary-btn" id="addTaskBtn">
                                <span class="btn-icon">+</span>
                                –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
                            </button>
                        </div>
                    </div>

                    <div class="progress-card">
                        <div class="progress-info">
                            <span>–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</span>
                            <span class="progress-percent" id="progressPercent">0%</span>
                        </div>
                        <div class="progress-track">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                        <div class="progress-stats">
                            <span id="completedTasks">0</span> –∏–∑ <span id="totalTasks">0</span> –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
                        </div>
                    </div>

                    <div class="tasks-section">
                        <div class="tasks-header">
                            <h3 class="section-title">–ó–∞–¥–∞—á–∏</h3>
                            <div class="tasks-controls">
                                <select id="taskSort" class="task-sort">
                                    <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                                    <option value="completed">–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</option>
                                    <option value="active">–°–Ω–∞—á–∞–ª–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                                    <option value="title">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–ê-–Ø)</option>
                                    <option value="title_desc">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é (–Ø-–ê)</option>
                                </select>
                            </div>
                        </div>
                        <div class="tasks-container" id="tasksContainer">
                            <div class="empty-workspace">
                                <div class="empty-icon">üìã</div>
                                <h3 class="empty-title">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                                <p class="empty-text">–î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á–∏ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ü–µ–ª–∏</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="view-content" id="statsView">
                    <div class="stats-header">
                        <h2 class="stats-title">–ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-value" id="totalGoalsStat">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ —Ü–µ–ª–µ–π</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="completedGoalsStat">0</div>
                            <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üìã</div>
                            <div class="stat-value" id="totalTasksStat">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-value" id="productivityStat">0%</div>
                            <div class="stat-label">–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</div>
                        </div>
                    </div>
                    
                    <div class="stats-chart">
                        <h3 class="chart-title">–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ü–µ–ª—è–º</h3>
                        <div class="chart-container" id="progressChart">
                            <p class="empty-text">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="main-footer">
        <p>Goal Map ‚Ä¢ 2025</p>
        <p class="footer-note">–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Firebase</p>
    </footer>

    <div class="modal-overlay" id="authModal">
        <div class="modal auth-modal">
            <div class="modal-header">
                <h3 class="modal-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
                <button class="close-modal" id="closeAuth">&times;</button>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">–í—Ö–æ–¥</button>
                <button class="auth-tab" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>
            
            <form class="auth-form active" id="loginForm">
                <div class="input-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="example@mail.com" required>
                </div>
                <div class="input-group">
                    <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="loginPassword" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn primary-btn full-width">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</button>
            </form>
            
            <form class="auth-form" id="registerForm">
                <div class="input-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" placeholder="example@mail.com" required>
                </div>
                <div class="input-group">
                    <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="registerPassword" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤" minlength="6" required>
                </div>
                <div class="input-group">
                    <label for="registerName">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" id="registerName" placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?" required>
                </div>
                <button type="submit" class="btn primary-btn full-width">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="goalModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="goalModalTitle">üéØ –ù–æ–≤–∞—è —Ü–µ–ª—å</h3>
                <button class="close-modal" id="closeGoal">&times;</button>
            </div>
            <form id="goalForm">
                <div class="input-group">
                    <label for="goalTitle">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏*</label>
                    <input type="text" id="goalTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–∑—É—á–∏—Ç—å JavaScript" required>
                </div>
                <div class="input-group">
                    <label for="goalDesc">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <textarea id="goalDesc" placeholder="–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤–∞—à–µ–π —Ü–µ–ª–∏..." rows="3"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn secondary-btn" id="cancelGoal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn primary-btn" id="goalSubmitBtn">–°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="taskModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="taskModalTitle">üìã –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
                <button class="close-modal" id="closeTask">&times;</button>
            </div>
            <form id="taskForm">
                <div class="input-group">
                    <label for="taskTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏*</label>
                    <input type="text" id="taskTitle" placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?" required>
                </div>
                <div class="input-group">
                    <label for="taskDesc">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="taskDesc" placeholder="–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏..." rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label for="taskParent">–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞</label>
                    <select id="taskParent">
                        <option value="">–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn secondary-btn" id="cancelTask">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn primary-btn" id="taskSubmitBtn">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="deleteConfirmModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
                <button class="close-modal" id="closeDeleteConfirm">&times;</button>
            </div>
            <div class="modal-body">
                <div class="delete-confirm-content" id="deleteConfirmMessage"></div>
                <div class="modal-actions">
                    <button class="btn secondary-btn" id="cancelDeleteBtn">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn danger-btn" id="confirmDeleteBtn">–£–¥–∞–ª–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div class="notification-container" id="notifications"></div>

    <script src="script.js"></script>
</body>
</html>

